<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang=""><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>RFC3339InstantDeserializer.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">BRMO service</a> &gt; <a href="../index.html" class="el_bundle">bgt-loader</a> &gt; <a href="index.source.html" class="el_package">nl.b3p.brmo.bgt.download.client</a> &gt; <span class="el_source">RFC3339InstantDeserializer.java</span></div><h1>RFC3339InstantDeserializer.java</h1><pre class="source lang-java linenums">/*
 * BGT Download API
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: v1
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package nl.b3p.brmo.bgt.download.client;

import java.io.IOException;
import java.time.Instant;
import java.time.OffsetDateTime;
import java.time.ZoneId;
import java.time.ZonedDateTime;
import java.time.format.DateTimeFormatter;
import java.time.temporal.Temporal;
import java.time.temporal.TemporalAccessor;
import java.util.function.BiFunction;
import java.util.function.Function;

import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.databind.DeserializationContext;
import com.fasterxml.jackson.datatype.jsr310.JavaTimeFeature;
import com.fasterxml.jackson.datatype.jsr310.deser.InstantDeserializer;

@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaClientCodegen&quot;, comments = &quot;Generator version: 7.14.0&quot;)
public class RFC3339InstantDeserializer&lt;T extends Temporal&gt; extends InstantDeserializer&lt;T&gt; {
    private static final long serialVersionUID = 1L;
<span class="nc" id="L34">    private final static boolean DEFAULT_NORMALIZE_ZONE_ID = JavaTimeFeature.NORMALIZE_DESERIALIZED_ZONE_ID.enabledByDefault();</span>
<span class="nc" id="L35">    private final static boolean DEFAULT_ALWAYS_ALLOW_STRINGIFIED_DATE_TIMESTAMPS</span>
<span class="nc" id="L36">    = JavaTimeFeature.ALWAYS_ALLOW_STRINGIFIED_DATE_TIMESTAMPS.enabledByDefault();</span>

<span class="nc" id="L38">    public static final RFC3339InstantDeserializer&lt;Instant&gt; INSTANT = new RFC3339InstantDeserializer&lt;&gt;(</span>
        Instant.class, DateTimeFormatter.ISO_INSTANT,
        Instant::from,
<span class="nc" id="L41">        a -&gt; Instant.ofEpochMilli( a.value ),</span>
<span class="nc" id="L42">        a -&gt; Instant.ofEpochSecond( a.integer, a.fraction ),</span>
        null,
        true, // yes, replace zero offset with Z
        DEFAULT_NORMALIZE_ZONE_ID,
        DEFAULT_ALWAYS_ALLOW_STRINGIFIED_DATE_TIMESTAMPS
    );

<span class="nc" id="L49">    public static final RFC3339InstantDeserializer&lt;OffsetDateTime&gt; OFFSET_DATE_TIME = new RFC3339InstantDeserializer&lt;&gt;(</span>
        OffsetDateTime.class, DateTimeFormatter.ISO_OFFSET_DATE_TIME,
        OffsetDateTime::from,
<span class="nc" id="L52">        a -&gt; OffsetDateTime.ofInstant( Instant.ofEpochMilli( a.value ), a.zoneId ),</span>
<span class="nc" id="L53">        a -&gt; OffsetDateTime.ofInstant( Instant.ofEpochSecond( a.integer, a.fraction ), a.zoneId ),</span>
<span class="nc bnc" id="L54" title="All 4 branches missed.">        (d, z) -&gt; ( d.isEqual( OffsetDateTime.MIN ) || d.isEqual( OffsetDateTime.MAX ) ?</span>
<span class="nc" id="L55">        d :</span>
<span class="nc" id="L56">        d.withOffsetSameInstant( z.getRules().getOffset( d.toLocalDateTime() ) ) ),</span>
        true, // yes, replace zero offset with Z
        DEFAULT_NORMALIZE_ZONE_ID,
        DEFAULT_ALWAYS_ALLOW_STRINGIFIED_DATE_TIMESTAMPS
    );

<span class="nc" id="L62">    public static final RFC3339InstantDeserializer&lt;ZonedDateTime&gt; ZONED_DATE_TIME = new RFC3339InstantDeserializer&lt;&gt;(</span>
        ZonedDateTime.class, DateTimeFormatter.ISO_ZONED_DATE_TIME,
        ZonedDateTime::from,
<span class="nc" id="L65">        a -&gt; ZonedDateTime.ofInstant( Instant.ofEpochMilli( a.value ), a.zoneId ),</span>
<span class="nc" id="L66">        a -&gt; ZonedDateTime.ofInstant( Instant.ofEpochSecond( a.integer, a.fraction ), a.zoneId ),</span>
        ZonedDateTime::withZoneSameInstant,
        false, // keep zero offset and Z separate since zones explicitly supported
        DEFAULT_NORMALIZE_ZONE_ID,
        DEFAULT_ALWAYS_ALLOW_STRINGIFIED_DATE_TIMESTAMPS
    );

    protected RFC3339InstantDeserializer(
            Class&lt;T&gt; supportedType,
            DateTimeFormatter formatter,
            Function&lt;TemporalAccessor, T&gt; parsedToValue,
            Function&lt;FromIntegerArguments, T&gt; fromMilliseconds,
            Function&lt;FromDecimalArguments, T&gt; fromNanoseconds,
            BiFunction&lt;T, ZoneId, T&gt; adjust,
            boolean replaceZeroOffsetAsZ,
            boolean normalizeZoneId,
            boolean readNumericStringsAsTimestamp) {
<span class="nc" id="L83">        super(</span>
                supportedType,
                formatter,
                parsedToValue,
                fromMilliseconds,
                fromNanoseconds,
                adjust,
                replaceZeroOffsetAsZ,
                normalizeZoneId,
                readNumericStringsAsTimestamp
        );
<span class="nc" id="L94">    }</span>

    @Override
    protected T _fromString(JsonParser p, DeserializationContext ctxt, String string0) throws IOException {
<span class="nc" id="L98">        return super._fromString(p, ctxt, string0.replace( ' ', 'T' ));</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>