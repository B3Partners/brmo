<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DeltaCustomApi.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">BRMO BGT / IMGeo CityGML loader</a> &gt; <a href="index.source.html" class="el_package">nl.b3p.brmo.bgt.download.api</a> &gt; <span class="el_source">DeltaCustomApi.java</span></div><h1>DeltaCustomApi.java</h1><pre class="source lang-java linenums">/*
 * BGT Download API
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: v1
 * 
 *
 * NOTE: This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

package nl.b3p.brmo.bgt.download.api;

import nl.b3p.brmo.bgt.download.client.ApiClient;
import nl.b3p.brmo.bgt.download.client.ApiException;
import nl.b3p.brmo.bgt.download.client.ApiResponse;
import nl.b3p.brmo.bgt.download.client.Pair;

import nl.b3p.brmo.bgt.download.model.DeltaCustomDownloadRequest;
import nl.b3p.brmo.bgt.download.model.DeltaCustomDownloadResponse;
import nl.b3p.brmo.bgt.download.model.DeltaCustomDownloadStatusResponse;

import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;

import java.io.InputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;
import java.io.OutputStream;
import java.net.http.HttpRequest;
import java.nio.channels.Channels;
import java.nio.channels.Pipe;
import java.net.URI;
import java.net.http.HttpClient;
import java.net.http.HttpRequest;
import java.net.http.HttpResponse;
import java.time.Duration;

import java.util.ArrayList;
import java.util.StringJoiner;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.function.Consumer;

@javax.annotation.Generated(value = &quot;org.openapitools.codegen.languages.JavaClientCodegen&quot;, comments = &quot;Generator version: 7.9.0&quot;)
public class DeltaCustomApi {
  private final HttpClient memberVarHttpClient;
  private final ObjectMapper memberVarObjectMapper;
  private final String memberVarBaseUri;
  private final Consumer&lt;HttpRequest.Builder&gt; memberVarInterceptor;
  private final Duration memberVarReadTimeout;
  private final Consumer&lt;HttpResponse&lt;InputStream&gt;&gt; memberVarResponseInterceptor;
  private final Consumer&lt;HttpResponse&lt;String&gt;&gt; memberVarAsyncResponseInterceptor;

  public DeltaCustomApi() {
<span class="nc" id="L60">    this(new ApiClient());</span>
<span class="nc" id="L61">  }</span>

<span class="nc" id="L63">  public DeltaCustomApi(ApiClient apiClient) {</span>
<span class="nc" id="L64">    memberVarHttpClient = apiClient.getHttpClient();</span>
<span class="nc" id="L65">    memberVarObjectMapper = apiClient.getObjectMapper();</span>
<span class="nc" id="L66">    memberVarBaseUri = apiClient.getBaseUri();</span>
<span class="nc" id="L67">    memberVarInterceptor = apiClient.getRequestInterceptor();</span>
<span class="nc" id="L68">    memberVarReadTimeout = apiClient.getReadTimeout();</span>
<span class="nc" id="L69">    memberVarResponseInterceptor = apiClient.getResponseInterceptor();</span>
<span class="nc" id="L70">    memberVarAsyncResponseInterceptor = apiClient.getAsyncResponseInterceptor();</span>
<span class="nc" id="L71">  }</span>

  protected ApiException getApiException(String operationId, HttpResponse&lt;InputStream&gt; response) throws IOException {
<span class="nc bnc" id="L74" title="All 2 branches missed.">    String body = response.body() == null ? null : new String(response.body().readAllBytes());</span>
<span class="nc" id="L75">    String message = formatExceptionMessage(operationId, response.statusCode(), body);</span>
<span class="nc" id="L76">    return new ApiException(response.statusCode(), message, response.headers(), body);</span>
  }

  private String formatExceptionMessage(String operationId, int statusCode, String body) {
<span class="nc bnc" id="L80" title="All 4 branches missed.">    if (body == null || body.isEmpty()) {</span>
<span class="nc" id="L81">      body = &quot;[no body]&quot;;</span>
    }
<span class="nc" id="L83">    return operationId + &quot; call failed with: &quot; + statusCode + &quot; - &quot; + body;</span>
  }

  /**
   * Met dit endpoint kan een delta custom download aangevraagd worden
   * 
   * @param deltaCustomDownloadRequest JSON object waarin staat gespecificeerd welke informatie de download moet bevatten. Als het verzoek geen deltaId bevat, dan zal de download de meest recente initiële levering bevatten. Als het verzoek wel een deltaId bevat, dan zal de download alleen de wijzigingen bevatten uit de opgegeven delta.  (required)
   * @return DeltaCustomDownloadResponse
   * @throws ApiException if fails to make API call
   */
  public DeltaCustomDownloadResponse deltaCustomDownload(DeltaCustomDownloadRequest deltaCustomDownloadRequest) throws ApiException {
<span class="nc" id="L94">    ApiResponse&lt;DeltaCustomDownloadResponse&gt; localVarResponse = deltaCustomDownloadWithHttpInfo(deltaCustomDownloadRequest);</span>
<span class="nc" id="L95">    return localVarResponse.getData();</span>
  }

  /**
   * Met dit endpoint kan een delta custom download aangevraagd worden
   * 
   * @param deltaCustomDownloadRequest JSON object waarin staat gespecificeerd welke informatie de download moet bevatten. Als het verzoek geen deltaId bevat, dan zal de download de meest recente initiële levering bevatten. Als het verzoek wel een deltaId bevat, dan zal de download alleen de wijzigingen bevatten uit de opgegeven delta.  (required)
   * @return ApiResponse&amp;lt;DeltaCustomDownloadResponse&amp;gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse&lt;DeltaCustomDownloadResponse&gt; deltaCustomDownloadWithHttpInfo(DeltaCustomDownloadRequest deltaCustomDownloadRequest) throws ApiException {
<span class="nc" id="L106">    HttpRequest.Builder localVarRequestBuilder = deltaCustomDownloadRequestBuilder(deltaCustomDownloadRequest);</span>
    try {
<span class="nc" id="L108">      HttpResponse&lt;InputStream&gt; localVarResponse = memberVarHttpClient.send(</span>
<span class="nc" id="L109">          localVarRequestBuilder.build(),</span>
<span class="nc" id="L110">          HttpResponse.BodyHandlers.ofInputStream());</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">      if (memberVarResponseInterceptor != null) {</span>
<span class="nc" id="L112">        memberVarResponseInterceptor.accept(localVarResponse);</span>
      }
      try {
<span class="nc bnc" id="L115" title="All 2 branches missed.">        if (localVarResponse.statusCode()/ 100 != 2) {</span>
<span class="nc" id="L116">          throw getApiException(&quot;deltaCustomDownload&quot;, localVarResponse);</span>
        }
<span class="nc" id="L118">        return new ApiResponse&lt;DeltaCustomDownloadResponse&gt;(</span>
<span class="nc" id="L119">          localVarResponse.statusCode(),</span>
<span class="nc" id="L120">          localVarResponse.headers().map(),</span>
<span class="nc bnc" id="L121" title="All 2 branches missed.">          localVarResponse.body() == null ? null : memberVarObjectMapper.readValue(localVarResponse.body(), new TypeReference&lt;DeltaCustomDownloadResponse&gt;() {}) // closes the InputStream</span>
        );
      } finally {
      }
<span class="nc" id="L125">    } catch (IOException e) {</span>
<span class="nc" id="L126">      throw new ApiException(e);</span>
    }
<span class="nc" id="L128">    catch (InterruptedException e) {</span>
<span class="nc" id="L129">      Thread.currentThread().interrupt();</span>
<span class="nc" id="L130">      throw new ApiException(e);</span>
    }
  }

  private HttpRequest.Builder deltaCustomDownloadRequestBuilder(DeltaCustomDownloadRequest deltaCustomDownloadRequest) throws ApiException {
    // verify the required parameter 'deltaCustomDownloadRequest' is set
<span class="nc bnc" id="L136" title="All 2 branches missed.">    if (deltaCustomDownloadRequest == null) {</span>
<span class="nc" id="L137">      throw new ApiException(400, &quot;Missing the required parameter 'deltaCustomDownloadRequest' when calling deltaCustomDownload&quot;);</span>
    }

<span class="nc" id="L140">    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();</span>

<span class="nc" id="L142">    String localVarPath = &quot;/delta/custom&quot;;</span>

<span class="nc" id="L144">    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));</span>

<span class="nc" id="L146">    localVarRequestBuilder.header(&quot;Content-Type&quot;, &quot;application/json&quot;);</span>
<span class="nc" id="L147">    localVarRequestBuilder.header(&quot;Accept&quot;, &quot;application/json&quot;);</span>

    try {
<span class="nc" id="L150">      byte[] localVarPostBody = memberVarObjectMapper.writeValueAsBytes(deltaCustomDownloadRequest);</span>
<span class="nc" id="L151">      localVarRequestBuilder.method(&quot;POST&quot;, HttpRequest.BodyPublishers.ofByteArray(localVarPostBody));</span>
<span class="nc" id="L152">    } catch (IOException e) {</span>
<span class="nc" id="L153">      throw new ApiException(e);</span>
<span class="nc" id="L154">    }</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">    if (memberVarReadTimeout != null) {</span>
<span class="nc" id="L156">      localVarRequestBuilder.timeout(memberVarReadTimeout);</span>
    }
<span class="nc bnc" id="L158" title="All 2 branches missed.">    if (memberVarInterceptor != null) {</span>
<span class="nc" id="L159">      memberVarInterceptor.accept(localVarRequestBuilder);</span>
    }
<span class="nc" id="L161">    return localVarRequestBuilder;</span>
  }

  /**
   * Dit endpoint geeft de status terug van een aangevraagde delta custom download
   * 
   * @param downloadRequestId  (required)
   * @return DeltaCustomDownloadStatusResponse
   * @throws ApiException if fails to make API call
   */
  public DeltaCustomDownloadStatusResponse deltaCustomDownloadStatus(String downloadRequestId) throws ApiException {
<span class="nc" id="L172">    ApiResponse&lt;DeltaCustomDownloadStatusResponse&gt; localVarResponse = deltaCustomDownloadStatusWithHttpInfo(downloadRequestId);</span>
<span class="nc" id="L173">    return localVarResponse.getData();</span>
  }

  /**
   * Dit endpoint geeft de status terug van een aangevraagde delta custom download
   * 
   * @param downloadRequestId  (required)
   * @return ApiResponse&amp;lt;DeltaCustomDownloadStatusResponse&amp;gt;
   * @throws ApiException if fails to make API call
   */
  public ApiResponse&lt;DeltaCustomDownloadStatusResponse&gt; deltaCustomDownloadStatusWithHttpInfo(String downloadRequestId) throws ApiException {
<span class="nc" id="L184">    HttpRequest.Builder localVarRequestBuilder = deltaCustomDownloadStatusRequestBuilder(downloadRequestId);</span>
    try {
<span class="nc" id="L186">      HttpResponse&lt;InputStream&gt; localVarResponse = memberVarHttpClient.send(</span>
<span class="nc" id="L187">          localVarRequestBuilder.build(),</span>
<span class="nc" id="L188">          HttpResponse.BodyHandlers.ofInputStream());</span>
<span class="nc bnc" id="L189" title="All 2 branches missed.">      if (memberVarResponseInterceptor != null) {</span>
<span class="nc" id="L190">        memberVarResponseInterceptor.accept(localVarResponse);</span>
      }
      try {
<span class="nc bnc" id="L193" title="All 2 branches missed.">        if (localVarResponse.statusCode()/ 100 != 2) {</span>
<span class="nc" id="L194">          throw getApiException(&quot;deltaCustomDownloadStatus&quot;, localVarResponse);</span>
        }
<span class="nc" id="L196">        return new ApiResponse&lt;DeltaCustomDownloadStatusResponse&gt;(</span>
<span class="nc" id="L197">          localVarResponse.statusCode(),</span>
<span class="nc" id="L198">          localVarResponse.headers().map(),</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">          localVarResponse.body() == null ? null : memberVarObjectMapper.readValue(localVarResponse.body(), new TypeReference&lt;DeltaCustomDownloadStatusResponse&gt;() {}) // closes the InputStream</span>
        );
      } finally {
      }
<span class="nc" id="L203">    } catch (IOException e) {</span>
<span class="nc" id="L204">      throw new ApiException(e);</span>
    }
<span class="nc" id="L206">    catch (InterruptedException e) {</span>
<span class="nc" id="L207">      Thread.currentThread().interrupt();</span>
<span class="nc" id="L208">      throw new ApiException(e);</span>
    }
  }

  private HttpRequest.Builder deltaCustomDownloadStatusRequestBuilder(String downloadRequestId) throws ApiException {
    // verify the required parameter 'downloadRequestId' is set
<span class="nc bnc" id="L214" title="All 2 branches missed.">    if (downloadRequestId == null) {</span>
<span class="nc" id="L215">      throw new ApiException(400, &quot;Missing the required parameter 'downloadRequestId' when calling deltaCustomDownloadStatus&quot;);</span>
    }

<span class="nc" id="L218">    HttpRequest.Builder localVarRequestBuilder = HttpRequest.newBuilder();</span>

<span class="nc" id="L220">    String localVarPath = &quot;/delta/custom/{downloadRequestId}/status&quot;</span>
<span class="nc" id="L221">        .replace(&quot;{downloadRequestId}&quot;, ApiClient.urlEncode(downloadRequestId.toString()));</span>

<span class="nc" id="L223">    localVarRequestBuilder.uri(URI.create(memberVarBaseUri + localVarPath));</span>

<span class="nc" id="L225">    localVarRequestBuilder.header(&quot;Accept&quot;, &quot;application/json&quot;);</span>

<span class="nc" id="L227">    localVarRequestBuilder.method(&quot;GET&quot;, HttpRequest.BodyPublishers.noBody());</span>
<span class="nc bnc" id="L228" title="All 2 branches missed.">    if (memberVarReadTimeout != null) {</span>
<span class="nc" id="L229">      localVarRequestBuilder.timeout(memberVarReadTimeout);</span>
    }
<span class="nc bnc" id="L231" title="All 2 branches missed.">    if (memberVarInterceptor != null) {</span>
<span class="nc" id="L232">      memberVarInterceptor.accept(localVarRequestBuilder);</span>
    }
<span class="nc" id="L234">    return localVarRequestBuilder;</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>